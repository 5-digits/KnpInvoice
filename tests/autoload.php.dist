<?php

$twig = __DIR__.'/../vendor/twig/lib/Twig/Autoloader.php';
if (file_exists($twig)) {
    require_once $twig;
    Twig_Autoloader::register();
}

spl_autoload_register(function($class) {
    $namespaces = array(
        'Knp\Invoice\Tests' => __DIR__,
        'Knp\Invoice'       => __DIR__.'/../src/',
        'Knp\Snappy'        => __DIR__.'/../vendor/',
        'Symfony'           => __DIR__.'/../vendor/'
    );

    $class = ltrim($class, '\\');
    foreach ($namespaces as $namespace => $dir) {
        if (0 === strpos($class, $namespace)) {
            $file = $dir.'/'.str_replace('\\', '/', $class).'.php';
            if (file_exists($file)) {
                require $file;
            }
        }
    }
});